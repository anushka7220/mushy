 /* ---------- Page background ---------- */
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f5e8d2;
      /* beige grid / paper texture */
      background-image:
        linear-gradient(rgba(0, 0, 0, 0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
      background-size: 20px 20px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .cafe-wrapper {
      position: relative;
      max-width: 700px;
      width: 100vw;
      animation: float 4s ease-in-out infinite;
    }

    .cafe-wrapper img {
      width: 100%;
      display: block;
      image-rendering: pixelated; /* keep that crisp pixel look */
      filter: drop-shadow(0 30px 18px rgba(0, 0, 0, 0.15));
      position: relative;
      z-index: 2;
    }
    .cafe-wrapper::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120%;
    height: 120%;
    transform: translate(-50%, -50%);
    background: radial-gradient(
      circle,
      rgba(255, 210, 120, 0.55) 0%,
      rgba(255, 180, 80, 0.25) 40%,
      rgba(255, 160, 60, 0.15) 60%,
      rgba(255, 140, 40, 0) 80%
    );
    filter: blur(40px);
    z-index: 0;
    border-radius: 50%;
    animation: glowPulse 4s ease-in-out infinite;
  }
   @keyframes glowPulse {
    0%   { transform: translate(-50%, -50%) scale(1); opacity: 0.75; }
    50%  { transform: translate(-50%, -50%) scale(1.08); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 0.75; }
  }


    /* ---------- Smoke from chimney ---------- */
    .smoke {
    position: absolute;
    /* Move it closer to the top of the cafe image */
    bottom: 80%;          /* tweak this value to line up with your chimney */
    left:9%;            /* tweak left/right as per your chimney */
    width: 180px;
    height: 200px;
    pointer-events: none;
    overflow: visible;
    z-index: 2;           /* keep smoke ABOVE the cafe image */
  }

  .smoke-puff {
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 60px;
    height: 60px;
    margin-left: -30px;    /* center the puff */
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgb(101, 101, 105), rgba(255,255,255,0.1));
    opacity: 0.9;          /* valid opacity */
    animation: puff 4s linear infinite;
    filter: blur(2px);
  }

  .smoke-puff:nth-child(2) {
    width: 22px;
    height: 22px;
    margin-left: -18px;
    animation-delay: 1.2s;
  }

  .smoke-puff:nth-child(3) {
    width: 20px;
    height: 20px;
    margin-left: 8px;
    animation-delay: 2.4s;
  }


    @keyframes puff {
      0% {
        transform: translateY(0) scale(0.5);
        opacity: 0;
      }
      10% {
        opacity: 0.9;
      }
      60% {
        transform: translateY(-70px) scale(1);
        opacity: 0.5;
      }
      100% {
        transform: translateY(-110px) scale(1.2);
        opacity: 0;
      }
    }

    /* ---------- Cafe "alive" animation ---------- */
    @keyframes float {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-4px); }
      100% { transform: translateY(0); }
    }

.leaf-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 10;
}

.leaf {
  position: absolute;
  width: 30px;        /* change size here */
  image-rendering: pixelated;
  animation: leafFall 8s infinite linear;
  opacity: 0.9;
}

/* Random positions, durations, delays */
.leaf:nth-child(1) { left: 4%;  animation-duration: 10s; animation-delay: 0s; }
.leaf:nth-child(2) { left: 15%; animation-duration: 9s;  animation-delay: -3s; }
.leaf:nth-child(3) { left: 25%; animation-duration: 11s; animation-delay: -5s; }
.leaf:nth-child(4) { left: 35%; animation-duration: 8s;  animation-delay: -2s; }
.leaf:nth-child(5) { left: 45%; animation-duration: 12s; animation-delay: -4s; }
.leaf:nth-child(6) { left: 55%; animation-duration: 10s; animation-delay: -6s; }
.leaf:nth-child(7) { left: 65%; animation-duration: 9s;  animation-delay: -1s; }
.leaf:nth-child(8) { left: 75%; animation-duration: 10.5s; animation-delay: -7s; }
.leaf:nth-child(9) { left: 85%; animation-duration: 11.5s; animation-delay: -3.5s; }
.leaf:nth-child(10){ left: 92%; animation-duration: 9.2s;  animation-delay: -1.8s; }

@keyframes leafFall {
  0% {
    transform: translateY(-150px) rotate(0deg);
  }
  50% {
    transform: translateY(50vh) rotate(120deg);
  }
  100% {
    transform: translateY(120vh) rotate(260deg);
    opacity: 0;
  }
}
.bear-animation {
  position: absolute;
  /* tweak these to fit the window perfectly */
  top: 64%;         /* vertical position */
  left: 50%;        /* horizontal center */
  transform: translate(-50%, -50%);
  width: 150px;     /* size of the animation */
  height: 110px;
  pointer-events: none;
  z-index: 4;       /* above cafe image */
}
#bear-container-2 {
  opacity: 0;
  z-index: 6;
  width: 170px;     /* size of the animation */
  height: 310px;
}
/* Annotations container */
.annotations {
  position: fixed;
  inset: 0;
  pointer-events: none; /* decorative only */
  z-index: 60; /* sits above background but below interactive UI */
  font-family: "Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}

/* Basic annotation layout (transparent background) */
.annotation {
  position: absolute;
  max-width: 220px;
  color: #2b2b2b;
  pointer-events: none;
  transform-origin: left center;
  /* removed the white/paper highlight ‚Äî background stays transparent */
  background: transparent;
}

.annotation .label-title {
  font-family: "DM Serif Display", serif;
  font-weight: 400;
  font-size: 17px;
  margin-bottom: 4px;
}

.annotation .label-sub {
  font-family: "Quicksand", sans-serif;
  font-size: 11px;
  opacity: 0.86;
}


/* subtle vertical guide (small line) to visually attach the label to the page edge */
.annotation::before {
  content: "";
  position: absolute;
  width: 2px;
  height: 22px;
  left: -12px; /* pulls the line slightly out to the left (when placed at left edge) */
  top: 6px;
  background: linear-gradient(180deg, rgba(201,108,44,0.9), rgba(201,108,44,0.5));
  border-radius: 1px;
  opacity: 0.9;
  /* when annotation is on the right side we invert the placement with RTL helper below */
}

/* small circular pin for decoration (keeps it minimal) */
.annotation::after {
  content: "";
  position: absolute;
  width: 8px;
  height: 8px;
  left: -18px;
  top: 4px;
  background: #c96c2c;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0,0,0,0.12);
}

/* If you place an annotation with `right:2%` (on the right border),
   flip the small guide line and pin so they sit to the right of the label. */
.annotation[style*="right:"]::before {
  left: auto;
  right: -12px;
}
.annotation[style*="right:"]::after {
  left: auto;
  right: -18px;
}

/* smaller screens -> shrink labels and move them a bit inward so they don't overlap the UI */
@media (max-width: 900px) {
  .annotation { max-width: 160px; }
  .annotation .label-title { font-size: 12px; }
  .annotation .label-sub { font-size: 10px; opacity: 0.9; }
  .annotation::before { height: 18px; left: -10px; top: 4px; }
  .annotation::after { width: 7px; height: 7px; left: -14px; top: 3px; }
}
/* === COIN BUTTON === */
#coin-btn {
  position: fixed;
  top: 18px;
  right: 18px;
  z-index: 120;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(180deg,#fff7ea, #ffdca8);
  border: 1px solid rgba(0,0,0,0.08);
  padding: 3px 9px;
  border-radius: 50px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease;
  pointer-events: auto; /* interactive */
  backdrop-filter: blur(2px);
  user-select: none;
}
#coin-btn img {
  width: 28px;
  height: 28px;
  image-rendering: pixelated;
}
#coin-count {
  font-family: "Quicksand", system-ui, sans-serif;
  font-weight: 600;
  color: #6b3d0d;
  font-size: 14px;
}
#coin-btn:active { transform: scale(.98); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }

/* little pulse for when coins change */
#coin-btn.pulse {
  animation: coinPulse .45s ease;
}
@keyframes coinPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* small +1 popup animation container (cloned) */
#coin-pop {
  position: fixed;
  top: 0; left: 0;
  z-index: 999;
  pointer-events: none;
}
.coin-plus {
  position: absolute;
  font-family: "Quicksand", sans-serif;
  font-weight: 700;
  color: #f08a2b;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  transform: translate(-50%, -100%);
  animation: coinRise 900ms ease-out forwards;
}
@keyframes coinRise {
  0% { opacity: 1; transform: translate(-50%, -100%) translateY(0) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -100%) translateY(-36px) scale(1.2); }
}

/* === ANNOTATION ICONS === */
.annotation .annotation-icon {
  display: block;
  width: 150px;
  height: 150px;
  object-fit: contain;
  margin-bottom: 3px;
  image-rendering: pixelated;
  pointer-events: none;
}

/* tweak icons on small screens */
@media (max-width: 900px) {
  .annotation .annotation-icon { width: 28px; height: 28px; margin-bottom: 6px; }
  #coin-btn { top: 12px; left: 12px; padding: 6px 8px; }
  #coin-count { font-size: 13px; }
}
/* ===== Annotations: professional alignment + icon animations ===== */

.annotations {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 60;
  font-family: "Quicksand", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}

/* container for each annotation; use inline style top/left/right/bottom to place */
.annotation {
  position: absolute;
  width: 220px;               /* consistent width */
  pointer-events: none;
  color: #2b2b2b;
  transform-origin: left center;
}

/* inner block keeps icon above text and centers contents */
.annotation-inner {
  display: flex;
  flex-direction: column;
  align-items: center;        /* center icon and text */
  gap: 3px;
  text-align: center;
  background: transparent;
}

/* icon ‚Äî consistent size and crisp pixel-rendering */
.annotation .annotation-icon {
  width: 150px;
  height: 150px;
  object-fit: contain;
  image-rendering: pixelated;
  display: block;
  pointer-events: none;
  will-change: transform, filter;
  transition: transform .22s ease, filter .22s ease;
  
}

/* keep friends static (no animation / hover) */
.annotation.friends .annotation-icon { filter: none; border-radius: 0; }


/* text block */
.annotation .annotation-text { display: block; }
.annotation .label-title {
  font-family: "DM Serif Display", serif;
  font-size: 16px;
  font-weight: 400;
  line-height: 1;
  color: #2b2b2b;
  margin-bottom: 2px;
}
.annotation .label-sub {
  font-family: "Quicksand", sans-serif;
  font-size: 12px;
  opacity: 0.86;
  line-height: 1.25;
  margin-top: 0;
}

/* small decorative guide (left & right) */
.annotation::before {
  content: "";
  position: absolute;
  width: 2px;
  height: 22px;
  left: -12px;
  top: 28px;
  background: linear-gradient(180deg, rgba(201,108,44,0.9), rgba(201,108,44,0.4));
  border-radius: 1px;
  opacity: 0.95;
}
.annotation[style*="right:"]::before {
  left: auto;
  right: -12px;
}

/* Lively icon animation (applies to icons with class "animate") */
/* gentle bob + subtle rotation for organic motion */
@keyframes iconBob {
  0%   { transform: translateY(0) rotate(-1deg) scale(1); }
  50%  { transform: translateY(-8px) rotate(2deg) scale(1.02); }
  100% { transform: translateY(0) rotate(-1deg) scale(1); }
}
.annotation .annotation-icon.animate {
  animation: iconBob 4.8s ease-in-out infinite;
  transform-origin: center bottom;
}

/* hover/tap micro-interaction (only applies visually, doesn't enable pointer) */
.annotation .annotation-icon:hover {
  transform: translateY(-6px) scale(1.04);
  filter: drop-shadow(0 10px 22px rgba(0,0,0,0.14));
}

/* slightly reduced icon size on mobile and narrower annotation layout */
@media (max-width: 900px) {
  .annotation { width: 160px; }
  .annotation .annotation-icon { width: 48px; height: 48px; }
  .annotation .label-title { font-size: 13px; }
  .annotation .label-sub { font-size: 11px; }
  .annotation::before { height: 18px; top: 22px; left: -10px; }
}

/* tilt & subtle drop shadow for right-hand annotations to balance composition */
.annotation.right .annotation-inner { align-items: center; }

/* ensure the annotation text doesn't overlap the cafe on narrow screens:
   if the cafe is centered, push left annotations a little inward for readability */
@media (min-width: 1200px) {
  .annotation.left { left: 2%; }
  .annotation.right { right: 2%; }
}

/* keep the coin button as previously defined (keeps top-right) */
#coin-btn { pointer-events: auto; } /* ensure it stays interactive above pointer-events:none annotations */
/* Nudge only the timer annotation slightly to the left */
.annotation.timer {
  /* move visually left without changing layout percentages */
  transform: translateX(-10px);
}

/* keep things responsive: smaller nudge on mobile */
@media (max-width: 900px) {
  .annotation.timer {
    transform: translateX(-6px);
  }
}
/* Timer panel tweaks (add/replace in cafe.css) */
.timer-panel {
  position: fixed;
  width: 260px;
  background: linear-gradient(180deg, #fffef8, #fff5e6);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 10px;
  box-shadow: 0 18px 36px rgba(0,0,0,0.12);
  padding: 12px;
  z-index: 200;
  pointer-events: auto;
  transition: opacity .18s ease, transform .18s ease;
  opacity: 0;
  transform: translateY(-6px) scale(.99);
  will-change: transform, opacity;
}

/* visible state */
.timer-panel[aria-hidden="false"] {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* header */
.timer-panel .timer-panel-head {
  margin-bottom: 8px;
}
.timer-panel .timer-title {
  font-family: "DM Serif Display", serif;
  font-size: 18px;
  color: #3b2b1f;
}
.timer-panel .timer-sub {
  font-family: "Quicksand", sans-serif;
  font-size: 12px;
  opacity: 0.8;
}

/* the minutes container is scrollable */
.minutes-wrap {
  max-height: 220px; /* scrollable area */
  overflow-y: auto;
  border-radius: 8px;
  padding: 6px;
  background: rgba(255,255,255,0.7);
  border: 1px solid rgba(0,0,0,0.03);
  margin-bottom: 10px;
  outline: none;
}

/* minutes list items */
.minutes-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.minutes-list li {
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
  user-select: none;
  font-family: "Quicksand", sans-serif;
  font-weight: 600;
  text-align: center;
}
.minutes-list li:focus {
  outline: none;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}
.minutes-list li.selected {
  background: linear-gradient(180deg,#ffdca8,#fff7ea);
  color: #5a3410;
  transform: translateX(0px);
}

/* controls */
.timer-controls { display:flex; gap:8px; justify-content: flex-end; }
.btn { padding: 8px 12px; border-radius: 8px; border: none; cursor: pointer; font-family: "Quicksand", sans-serif; }
.btn.primary { background: #c96c2c; color: #fff; }
.btn.ghost { background: transparent; border: 1px solid rgba(0,0,0,0.06); }

/* countdown badge (already present but ensure styling) */
#countdown-badge {
  position: fixed;
  right: 20px;
  top: 72px;
  background: linear-gradient(180deg,#fff7ea,#ffdca8);
  border-radius: 999px;
  padding: 8px 12px;
  box-shadow: 0 10px 22px rgba(0,0,0,0.12);
  z-index: 300;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-family: "Quicksand", sans-serif;
  font-weight: 700;
  color: #6b3d0d;
}

/* tiny helper when panel would appear off-screen */
.timer-panel.flip-left {
  transform-origin: right top;
}
/* allow each annotation to be interactive while keeping the overlay container non-interactive */
.annotations { pointer-events: none; } /* keep overall layer decorative */
.annotation {
  pointer-events: auto;   /* allow clicks on individual annotation boxes */
  cursor: pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0); /* nicer tap on mobile */
}

/* ensure inner elements also allow pointer events */
.annotation .annotation-inner,
.annotation .annotation-icon,
.annotation .annotation-text {
  pointer-events: auto;
}

/* accessible focus styling */
.annotation[tabindex="0"]:focus {
  outline: 3px solid rgba(201,108,44,0.18);
  outline-offset: 6px;
  border-radius: 8px;
}
/* Slider timer styles (add to cafe.css) */
.timer-panel { /* already present; these are overrides/enhancements */
  width: 300px;
  padding: 14px;
  gap: 10px;
  display: flex;
  flex-direction: column;
}
.timer-top {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.timer-value {
  font-family: "DM Serif Display", serif;
  font-size: 26px;
  color: #3b2b1f;
  min-width: 96px;
  text-align: center;
  background: rgba(255,255,255,0.9);
  padding: 6px 10px;
  border-radius: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}
.slider-wrap {
  display:flex;
  flex-direction:column;
  gap:8px;
}
.range-row {
  display:flex;
  align-items:center;
  gap:12px;
}
input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 6px;
  background: linear-gradient(90deg,#ffdca8,#fff7ea);
  outline: none;
  margin: 0;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #c96c2c;
  box-shadow: 0 6px 14px rgba(0,0,0,0.18);
  cursor: pointer;
  border: 3px solid rgba(255,255,255,0.9);
}
input[type="range"]::-moz-range-thumb {
  width: 20px; height:20px; border-radius:50%; background:#c96c2c; border:3px solid rgba(255,255,255,0.9);
}

.preset-row { display:flex; gap:8px; }
.preset-btn {
  padding:6px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.06); background:#fff7ea; cursor:pointer;
  font-family:"Quicksand",sans-serif; font-weight:700;
}
.preset-btn.active { background:#c96c2c; color:#fff; box-shadow:0 8px 18px rgba(0,0,0,0.08); }

.timer-controls { display:flex; gap:8px; justify-content: flex-end; margin-top:8px; }
.timer-panel .timer-title { font-size:18px; margin-bottom:6px; }
@media (max-width:900px) {
  .timer-panel { width: 280px; }
  .timer-value { font-size:20px; min-width:76px; }
}
/* Mood panel styles (add to cafe.css) */
.mood-panel {
  position: fixed;
  width: 320px;
  background: linear-gradient(180deg,#fffdf8,#fff6ea);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 12px;
  padding: 14px;
  z-index: 9999;
  pointer-events: auto;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  transition: transform .16s ease, opacity .16s ease;
  opacity: 0;
  transform: translateY(-6px) scale(.99);
  font-family: "Quicksand", sans-serif;
}
.mood-panel[aria-hidden="false"] { opacity: 1; transform: translateY(0) scale(1); }
.mood-panel .mood-head { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:10px; }
.mood-panel .mood-title { font-family: "DM Serif Display", serif; font-size: 18px; color:#3b2b1f; }
.mood-panel .mood-sub { font-size:12px; opacity:.8; }

/* groups */
.mood-group { margin-bottom: 12px; }
.mood-group .group-label { font-weight:700; font-size:13px; margin-bottom:8px; color:#2b2b2b; }
.mood-buttons { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

/* option buttons */
.mood-opt {
  padding:8px 12px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.06);
  background: rgba(255,255,255,0.96);
  cursor:pointer;
  font-weight:700;
  min-width:84px;
  text-align:center;
}
.mood-opt.active {
  background: linear-gradient(180deg,#c96c2c,#b2561c);
  color: #fff;
  box-shadow: 0 10px 22px rgba(0,0,0,0.08);
}

/* 'Other' custom input */
.mood-other-wrap { display:flex; gap:8px; align-items:center; margin-top:8px; }
.mood-other-input {
  flex:1;
  padding:8px 10px;
  border-radius:8px;
  border:1px solid rgba(0,0,0,0.06);
  font-family:"Quicksand",sans-serif;
}

/* small preview (optional) using your screenshot path as image source */
.mood-preview {
  width:48px; height:48px; border-radius:8px; background-size:cover; background-position:center;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
  border: 1px solid rgba(0,0,0,0.04);
}
/* Example usage (local screenshot reference):
   background-image: url("/mnt/data/Screenshot 2025-11-26 at 1.35.49 AM.png");
   (we included the path above; if you want a visual preview in the panel, uncomment and use it)
*/

/* controls */
.mood-controls { display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }
.mood-save { padding:8px 12px; border-radius:8px; background:#c96c2c; color:#fff; border:none; cursor:pointer; }
.mood-cancel { padding:8px 12px; border-radius:8px; background:transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer; }

/* small tag next to coin button to show current mood+music */
#mood-tag {
  position: fixed;
  right: 18px;
  top: 118px;
  z-index: 140;
  background: rgba(255,255,255,0.95);
  border-radius: 999px;
  padding: 6px 10px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.08);
  font-family:"Quicksand",sans-serif;
  font-weight:700;
  color:#6b3d0d;
}

/* small responsive tweaks */
@media (max-width:900px) {
  .mood-panel { width: 280px; }
  .mood-opt { min-width:64px; padding:7px 10px; }
}
/* Bake panel (left-side) */
.bake-panel {
  position: fixed;
  width: 360px;
  background: linear-gradient(180deg,#fffef8,#fff3e6);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 12px;
  padding: 14px;
  z-index: 9999;
  box-shadow: 0 18px 36px rgba(0,0,0,0.12);
  transform: translateY(-6px) scale(.99);
  opacity: 0;
  transition: transform .16s ease, opacity .16s ease;
  pointer-events: auto;
  font-family: "Quicksand", sans-serif;
}
.bake-panel[aria-hidden="false"] { opacity: 1; transform: translateY(0) scale(1); }
.bake-panel .bake-head { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:12px; }
.bake-panel .bake-title { font-family:"DM Serif Display", serif; font-size:18px; color:#3b2b1f; }
.bake-panel .bake-sub { font-size:12px; opacity:.82; }

/* 2x2 grid for cakes */
.bake-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 12px;
}
.bake-item {
  background: rgba(255,255,255,0.95);
  border-radius: 10px;
  padding: 8px;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height: 92px;
  cursor: pointer;
  border: 2px solid rgba(0,0,0,0.04);
  transition: box-shadow .14s ease, transform .12s ease, border-color .12s ease;
}
.bake-item img {
  max-width:100%;
  max-height:100%;
  display:block;
  image-rendering: -webkit-optimize-contrast;
  border-radius:8px;
}

/* selected state */
.bake-item.selected {
  border-color: #c96c2c;
  box-shadow: 0 12px 30px rgba(201,108,44,0.14);
  transform: translateY(-4px);
}

/* controls */
.bake-controls { display:flex; gap:10px; justify-content:flex-end; margin-top:6px; }
.bake-save { padding:10px 14px; border-radius:8px; background:#c96c2c; color:#fff; border:none; cursor:pointer; font-weight:700; }
.bake-cancel { padding:10px 14px; border-radius:8px; background:transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer; }

/* small responsive tweak */
@media (max-width:900px) {
  .bake-panel { width: 300px; }
  .bake-item { min-height: 72px; }
}
/* Store / Treasures panel (left side) */
.store-panel {
  position: fixed;
  width: 360px;
  max-height: 68vh;
  left: 24px; /* default, overridden when anchored */
  top: 120px;
  background: linear-gradient(180deg,#fffef8,#fff6ea);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 12px;
  padding: 12px;
  z-index: 9999;
  box-shadow: 0 20px 44px rgba(0,0,0,0.14);
  overflow: hidden;
  transform: translateY(-6px) scale(.99);
  opacity: 0;
  transition: transform .18s ease, opacity .18s ease;
  pointer-events: auto;
  display:flex;
  flex-direction:column;
}
.store-panel[aria-hidden="false"] { opacity: 1; transform: translateY(0) scale(1); }

/* header */
.store-head {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:8px;
}
.store-title { font-family:"DM Serif Display", serif; font-size:18px; color:#3b2b1f; }
.store-sub { font-family:"Quicksand",sans-serif; font-size:12px; opacity:.8; }

/* scroll area */
.store-scroll {
  overflow-y: auto;
  padding-right: 6px;
  display:block;
}

/* grid 2 columns */
.store-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  padding-bottom: 8px;
}

/* card */
.treasure-card {
  position: relative;
  background: rgba(255,255,255,0.95);
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  border: 1px solid rgba(0,0,0,0.04);
  min-height: 96px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.treasure-card img {
  max-width: 100%;
  max-height: 100%;
  display:block;
  object-fit: cover;
}

/* hover effect */
.treasure-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 36px rgba(0,0,0,0.10);
  border-color: rgba(201,108,44,0.14);
}

/* overlay coin badge shown on hover or focus (hidden by default) */
.treasure-badge {
  position: absolute;
  right: 8px;
  top: 8px;
  background: linear-gradient(180deg,#fff7ea,#ffdca8);
  color: #6b3d0d;
  padding: 6px 8px;
  border-radius: 999px;
  font-weight:700;
  font-family:"Quicksand",sans-serif;
  transform: translateY(-6px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .16s ease, transform .16s ease;
  display:flex;
  align-items:center;
  gap:6px;
}

/* show badge on hover/focus */
.treasure-card:hover .treasure-badge,
.treasure-card:focus .treasure-badge,
.treasure-card[aria-selected="true"] .treasure-badge {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* selected state */
.treasure-card[aria-selected="true"] {
  border-color: #c96c2c;
  box-shadow: 0 18px 38px rgba(201,108,44,0.12);
}

/* controls row */
.store-controls {
  margin-top: 8px;
  display:flex;
  gap: 8px;
  justify-content:flex-end;
}
.store-close { padding:8px 12px; border-radius:8px; border:1px solid rgba(0,0,0,0.06); background:transparent; cursor:pointer; }
.store-buy { padding:8px 12px; border-radius:8px; background:#c96c2c; color:#fff; border:none; cursor:pointer; font-weight:700; }

/* scrollbar cosmetic */
.store-scroll::-webkit-scrollbar { width: 9px; }
.store-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.06); border-radius: 6px; }

/* responsive */
@media (max-width:900px) {
  .store-panel { width: 300px; left: 12px; top: 100px; max-height: 62vh; }
  .treasure-card { min-height:78px; }
  .treasure-badge { padding:5px 7px; }
}
/* Top-right HUD: coins, timer badge, mood tag (horizontal layout) */
.top-hud {
  position: fixed;
  top: 18px;
  right: 18px;
  z-index: 9999;
  display: flex;
  flex-direction: row-reverse;     /* üëà reverse visual order */
  gap: 12px;
  align-items: center;
  pointer-events: auto;
}

/* When we move #coin-btn into the hud, make it flow inline instead of fixed */
.top-hud #coin-btn {
  position: static;
  top: auto;
  right: auto;
  margin: 0;
  transform: none;
}

/* Make countdown badge sit nicely */
.top-hud #countdown-badge {
  position: relative;
  right: auto;
  top: auto;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  box-shadow: 0 8px 22px rgba(0,0,0,0.10);
}

/* Mood tag previously placed near coin button */
.top-hud #mood-tag {
  position: relative;
  right: auto;
  top: auto;
  margin: 0;
  padding: 6px 10px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.08);
}

/* Small spacing/collapse tweaks for narrow screens */
@media (max-width: 900px) {
  .top-hud {
    right: 12px;
    top: 12px;
    gap: 8px;
  }
  /* fallback: stack vertically on very narrow widths */
  @media (max-width: 520px) {
    .top-hud { flex-direction: column; align-items: flex-end; gap: 8px; }
  }
}

/* Optional: subtle divider between items */
.top-hud .hud-item-divider {
  width: 1px;
  height: 28px;
  background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02));
  border-radius: 1px;
}
/* Top HUD layout (if not already there) */
.top-hud {
  position: fixed;
  top: 18px;
  right: 24px;
  display: inline-flex;
  align-items: center;
  gap: 18px;
  z-index: 1200;
}

/* Cake progress HUD */
.cake-progress {
  position: relative;
  width: 52px;
  height: 52px;
  border-radius: 999px;
  padding: 6px;
  background: rgba(250, 244, 230, 0.95);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
  overflow: hidden;
}

.cake-progress img {
  width: 100%;
  height: 100%;
  display: block;
  image-rendering: pixelated;
}

/* full-color cake sits at the back */
#cake-progress-color {
  position: absolute;
  inset: 0;
  z-index: 1;
}

/* gray overlay on top that we ‚Äúuncover‚Äù from bottom to top */
#cake-progress-mask {
  position: absolute;
  inset: 0;
  z-index: 2;
  filter: grayscale(1) contrast(1.05) brightness(1.1);
  pointer-events: none;
  /* JS changes this inset to reveal color over time */
  clip-path: inset(0 0 0 0);
}

/* === Compact annotations (left / right blocks) === */
.annotation {
  width: 100px;          /* was 220px */
}

.annotation .annotation-inner {
  gap: 2px;
}

.annotation .annotation-icon {
  width: 110px;          /* was 150px */
  height: 110px;
}

.annotation .label-title {
  font-size: 14px;       /* was 16px */
}

.annotation .label-sub {
  font-size: 11px;       /* was 12px */
}

/* adjust the little line + pin so it stays aligned with smaller icon */
.annotation::before {
  top: 20px;
  height: 18px;
}

@media (max-width: 900px) {
  /* mobile can stay tiny, but we keep it consistent */
  .annotation { width: 150px; }
  .annotation .annotation-icon { width: 44px; height: 44px; }
}
/* === Compact panels === */

/* timer */
.timer-panel {
  width: 230px;          /* was 300px */
  padding: 10px;
}
.timer-value {
  font-size: 22px;       /* was 26px */
  min-width: 80px;
}

/* mood panel */
.mood-panel {
  width: 260px;          /* was 320px */
  padding: 10px;
}
.mood-opt {
  min-width: 72px;
  padding: 6px 9px;
}

/* bake panel */
.bake-panel {
  width: 300px;          /* was 360px */
  padding: 10px;
}
.bake-item {
  min-height: 72px;      /* smaller cake cards */
}

/* store panel */
.store-panel {
  width: 300px;          /* was 360px */
  max-height: 60vh;
}
.treasure-card {
  min-height: 80px;
}
/* === Global pixel-art font === */
*,
*::before,
*::after,
button,
input,
textarea {
  font-family: "Press Start 2P", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif !important;
  letter-spacing: 0.03em;
}

/* Slightly tighter for long text so it stays readable */
body {
  font-size: 12px;
  line-height: 1.4;
}
/* === PIXEL TEXT LAYOUT FIXES === */

/* 1. Side annotations (Timer & Focus, Mood Selector, Store, Friends, etc.) */
.annotation {
  width: 220px;                /* wider so words don't break every line */
}

.annotation .annotation-text {
  max-width: 220px;
  text-align: left;            /* more natural reading */
}

.annotation .label-title {
  font-size: 13px;
  line-height: 1.3;
  letter-spacing: 0.04em;      /* less spacing so it feels less stretched */
  margin-bottom: 4px;
}

.annotation .label-sub {
  font-size: 10px;
  line-height: 1.5;            /* more breathing room between lines */
  letter-spacing: 0.02em;
}

/* adjust the little guideline to align with new title position */
.annotation::before {
  top: 18px;
  height: 18px;
}

/* keep icons slightly smaller so the text + icon feel balanced */
.annotation .annotation-icon {
  width: 100px;
  height: 100px;
}

/* 2. Timer / Mood / Bake / Store panels: shrink text so it fits the boxes */

/* timer panel */
.timer-panel {
  width: 260px;
}
.timer-panel .timer-title {
  font-size: 14px;
}
.timer-panel .timer-sub {
  font-size: 10px;
  line-height: 1.4;
}
.timer-value {
  font-size: 20px;
}

.preset-btn,
.btn {
  font-size: 10px;
  letter-spacing: 0.03em;
}

/* mood panel */
.mood-panel {
  width: 270px;
}
.mood-panel .mood-title {
  font-size: 14px;
}
.mood-panel .mood-sub {
  font-size: 10px;
}
.mood-opt {
  font-size: 10px;
  padding: 6px 9px;
}

/* bake panel */
.bake-panel {
  width: 300px;
}
.bake-title {
  font-size: 14px;
}
.bake-sub {
  font-size: 10px;
}

/* store panel */
.store-panel {
  width: 300px;
}
.store-title {
  font-size: 14px;
}
.store-sub {
  font-size: 10px;
}
.store-buy,
.store-close {
  font-size: 10px;
}

/* Remove left/right decorative pin + line from annotations */
.annotation::before,
.annotation::after {
  display: none !important;
}
/* 2 rows √ó 4 columns bake grid */
.bake-grid {
  display: grid !important;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(2, auto);
  gap: 2px;
  padding: 1px;
}
.bake-item {
  min-height: 60px;
  padding: 3px;
}

.bake-item img {
  width: 60px;
  height: 60px;
  object-fit: contain;
  image-rendering: pixelated;
}
/* === Speaker toggle === */
#speaker-toggle {
  position: fixed;
  bottom: 18px;
  right: 18px;
  width: 50px;
  height: 50px;
  z-index: 9999;
  cursor: pointer;
  image-rendering: pixelated;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.18));
  transition: transform .12s ease, opacity .12s ease;
}

#speaker-toggle:active {
  transform: scale(0.96);
}

#speaker-toggle.muted {
  opacity: 0.4;
}
/* === PEEBO INTRO OVERLAY (CLEAN, NO BLUR, NO TINT) === */
#intro-overlay {
  position: fixed;
  inset: 0;
  z-index: 2000;
  pointer-events: auto;
  display: flex;
  align-items: flex-end;
  justify-content: flex-start;      /* let us position manually */
  background: transparent;
  opacity: 1;
  transition: opacity .3s ease, transform .3s ease;
}

#intro-overlay.hide {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-8px);
}

/* Position Peebo slightly right, standing on land */
#peebo-bear {
  position: absolute;
  left: 55%;                        /* <<< move right/left (was ~18%) */
  bottom: 7%;                      /* aligns feet with cottage land */
  width: 190px;
  height: auto;
  image-rendering: pixelated;
  z-index: 50;
}

/* Speech bubble: ABOVE Peebo, slightly LEFT of him */
.intro-bubble {
  position: absolute;
  left: 68%;                        /* bubble left of Peebo */
  bottom: 33%;                      /* bubble slightly above his head */
  max-width: 300px;
  background: #fffef8;
  border-radius: 18px;
  padding: 16px 18px 14px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.16);
  border: 1px solid rgba(0,0,0,0.05);
  z-index: 60;
}

/* Bubble tail pointing RIGHT ‚Üí toward Peebo */
.intro-bubble::before {
  content: "";
  position: absolute;
  left: -16px;                    /* tail on RIGHT now */
  top: 108px;
  width: 22px;
  height: 18px;
  background: #fffef8;
  border-radius: 18px;
}

/* Bubble text */
.intro-text p {
  margin: 0 0 6px;
  font-size: 10px;
  line-height: 1.5;
}

/* Next button */
#intro-next {
  margin-top: 10px;
  padding: 8px 16px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  font-size: 11px;
  font-weight: 700;
  background: #c96c2c;
  color: #fff;
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
}

/* Hide features while intro active */
body.intro-active .annotations,
body.intro-active .top-hud {
  opacity: 0;
  pointer-events: none;
  transform: translateY(8px) scale(.98);
}

/* No blur, no fade on cottage */
body.intro-active .page-frame,
body.intro-active .cafe-wrapper img.cafe-scene {
  filter: none !important;
  opacity: 1 !important;
}
/* === Feature pop-in when intro ends (Mac tab style) === */
@keyframes featurePop {
  0% {
    opacity: 0;
    transform: scale(0.85) translateY(8px);
  }
  60% {
    opacity: 1;
    transform: scale(1.03) translateY(0);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* trigger this once after intro by adding body.features-pop in JS */
body.features-pop .annotations,
body.features-pop .top-hud {
  animation: featurePop 0.99s ease-out;
}
/* === Signpost (only during intro) === */
#intro-signpost {
  position: absolute;
  left: 5%;
  bottom: -5%;
  image-rendering: pixelated;
  
}

#intro-signpost img {
  width: 240px;
  height: auto;
}

/* Intro layout on small screens */
@media (max-width: 780px) {
  .intro-inner {
    flex-direction: column-reverse;
    align-items: center;
    gap: 16px;
    padding: 18px 16px 28px;
    transform: none;
  }

  .intro-bubble {
    position: static;
    max-width: 90%;
    margin-bottom: 8px;
  }

  .intro-bubble::before {
    left: 50%;
    bottom: -10px;
    transform: translateX(-50%);
  }

  #intro-signpost {
    left: 8%;
    bottom: 4%;
  }
}
/* === Cake HUD progress === */
.cake-progress {
  position: relative;
  width: 50px;
  height: 50px;
  padding: 5px;
  overflow: hidden;
}


/* bottom layer is full color */
#cake-progress-color {
  z-index: 1;
}

/* top layer is grayscale that we gradually "eat away" from bottom to top */
#cake-progress-mask {
  z-index: 2;
  filter: grayscale(1);
  clip-path: inset(0 0 0 0);  /* 0% filled -> fully gray */
  transition: clip-path .2s linear;
}
/* Session start button (appears above cafe window) */
#session-start-btn {
  position: absolute;
  left: 50%;
  bottom: 22%;              /* tweak 20‚Äì25% until it sits nicely above window */
  transform: translateX(-50%) translateY(12px);
  padding: 10px 28px;
  border-radius: 999px;
  border: none;
  font-family: "Press Start 2P", system-ui, sans-serif;
  font-size: 11px;
  letter-spacing: 0.04em;
  background: #c96c2c;
  color: #fffef6;
  box-shadow: 0 12px 24px rgba(0,0,0,0.22);
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity .28s ease, transform .28s ease;
  z-index: 60;              /* above cottage, below HUD */
}

/* visible state */
#session-start-btn.visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0);
}

/* Start button hover */
#session-start-btn:hover {
  transform: translateX(-50%) translateY(-2px);
  box-shadow: 0 16px 32px rgba(0,0,0,0.28);
}

/* clean, no box, no shadow, bigger dish */
.cake-progress {
  width: 72px;          /* bigger */
  height: 72px;
  position: relative;
  overflow: visible;    /* allow image to breathe */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: none;      /* no background */
  box-shadow: none;      /* no shadow */
  padding: 0;
}

/* both layers overlap perfectly */
#cake-progress-color,
#cake-progress-mask {
  position: absolute;
  inset: 0;             /* fill entire container */
  width: 100%;
  height: 100%;
  object-fit: contain;
  image-rendering: pixelated;  /* keeps your pixel-art cake sharp */
}

/* grey mask that gets eaten away */
#cake-progress-mask {
  filter: grayscale(1) contrast(1.15) brightness(1.1);
  clip-path: inset(0 0 0 0);
  transition: clip-path 0.35s ease-out;
  pointer-events: none;
}
#bear-container-2 {
  width: 110px;      /* adjust to your liking */
  height: 180px;     /* keep it square so it stays proportional */
  position: absolute;
  left: 50%;
  top: 52%;        /* adjust if needed */
  transform: translateX(-50%);
  z-index: 50;        /* over the window but under speech bubble */
  pointer-events: none;
}
/* baked cake that appears in the cafe window when timer ends */
#baked-cake-window {
  position: absolute;
  left: 50%;
  top: 56%;           /* tweak 54‚Äì58% until it sits nicely in window */
  transform: translate(-50%, -50%);
  width: 210px;       /* adjust for size */
  height: auto;
  image-rendering: pixelated;
  pointer-events: none;
  display: none;      /* hidden until timer finishes */
}

/* Congrats / reset button */
.bake-done-btn {
  position: fixed;
  left: 50%;
  bottom: 32px;
  transform: translateX(-50%);
  padding: 10px 22px;
  border-radius: 999px;
  border: none;
  font-family: "Press Start 2P", system-ui;
  font-size: 10px;
  letter-spacing: 0.03em;
  background: #c96c2c;
  color: #fff;
  box-shadow: 0 14px 30px rgba(0,0,0,0.25);
  cursor: pointer;
  z-index: 2200;
}

.bake-done-btn:hover {
  transform: translateX(-50%) translateY(-2px);
  box-shadow: 0 18px 38px rgba(0,0,0,0.3);
}

/* support [hidden] attribute */
.bake-done-btn[hidden],
.baked-cake-display[hidden] {
  display: none !important;
}
.baked-cake-display {
  position: absolute;
  left: 50%;
  bottom: 140px;         /* tweak up/down until the cake sits nicely in the window */
  transform: translateX(-50%);
  width: 160px;          /* cake size ‚Äì adjust */
  pointer-events: none;
  image-rendering: pixelated;
  z-index: 25;           /* above cafe.png, below smoke if you want */
}
/* Small cake that appears in the cottage window after baking finishes */
#baked-cake-window {
  position: absolute;
  /* tweak these numbers so it lines up with your window */
  left: 47%;
  top: 66%;              /* try 55‚Äì60% until it feels right */
  transform: translate(-50%, -50%);

  width: 80px;          /* size of cake inside the window */
  max-width: 240px;
  height: auto;

  image-rendering: pixelated;
  pointer-events: none;

  display: none;         /* hidden until JS shows it */
  z-index: 8;            /* above cafe image, below HUD */
}
.bake-done-btn {
  padding: 18px 24px;
  border-radius: 12px;
  background: #fff7ea;
  border: 2px solid #e8c39d;
  font-family: 'Press Start 2P', monospace;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  cursor: pointer;
}

.done-title {
  font-size: 14px;
  color: #bb5f25;
}

.earned-coins-text {
  font-size: 12px;
  color: #c78139;
}

.done-reset {
  font-size: 10px;
  opacity: 0.8;
}
